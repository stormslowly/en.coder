字典序这么说才有逼格

Hello World. 大家好, 我是 pshu. 今天是码农英语课堂的第9期了.
今天讲一个单词 *** lexicography *** .

今天就不直接开始讲单词了,先闲扯一会.
现在做 IT 的如果你说你不知道 redis 那真是 Out 了.
Remote Dictionary Server.

几年之前的 pshu 也是 Out, 为了让自己 In 一点. 就开始学习 redis 了.
当是就开始看一本书来给自己充电,叫 "redis in action".
这类 "in action" 的书国内一般都是翻译成 xx 实战,那这里就是 redis 实战了.

就"redis in action" 这本书而言的话,还是非常推荐的. 这本书内容安排上还是比较有意思的,
他会先介绍一部分的 redis 的知识, 然后再介绍就此部分的知识做的一些应用.
这样边学边做不至于因为光学理论知识枯燥而放弃. 当然也因为这个原因,这本书属于那种让能力提升的书,
level up, 但不适合做工具参考书( reference). 但是在互联网时代了, 技术最好的参考书就它的主页文档了.
而且现在很多国内的志愿者也翻译了很多技术文档, 那些觉得直接看原文文档累的同学,
可以一边看原文文档, 一边看翻译文档.
不过注意, 翻译文档只原来你要参考的文档的参考, 请用参考的参考的态度去看他.

幸福终点站中 ,汤姆汉克斯通过英语和母语 六人行 学习英语.
https://youtu.be/niuysceUfj0?list=PLyzjcRIrgrHfSk8Up7NCL6YYJOKwMQ6Hb&t=2501

好了说回来, redis in action 有一节(section), 讲的是如何用 redis 做自动补全的后端组件.
我觉得挺实用的就拿来学习下. 其背后的原理也很简单.

就是 ZSET 中,当 ***所有*** 的score 都相同时, ZSET 中的成员是按照 key 的字符串的二进制编码排序的.

>When all scores are zero, all members are sorted based on the binary ordering of the strings.

那在 ASCII 的编码前提下,就可以就此实现一个按照前缀提示的功能. 虽然原理很简单,但是为了实现这个功能两个问题要解决.

首先就是需要先计算出需要补全的内容的 rank 的范围.解决的方式就是插入两个"参考"点,一个是小于当前前缀的最短但是排序最靠近前缀的字符串.
另外一个是字符串长度为前缀长度+1的最大字符串. 然后是通过这两个参考点来的 rank ,使用 ZRANGE 命令
拿到需要补全的内容. 最后再删掉这两个"参考"点.

第二个问题就在并发环境下,需要做之前的的插入和删除参考点的操作加锁.这里书中使用的是`WATCH`, `MULTI`.

总之,这种方法虽然原理简单,但是实现却不够直观. 导致我在工作中要用的时候,又要回头来看一遍书.
好在我查看文档的时候发现了新命令 `ZRANGEBYLEX`. 通过命令的调用就能完成基于前缀的自动补全.

比如要调用前缀为 lexi 的20个补全提示的话只要 `ZRANGEBYLEX (ab + 20`

命令中的 LEX 就是今天要说要的单词 ***lexicography*** 的缩写.
刚说按照二进制编码排序,在一些编码下就是字典序 lexicography order 的.


重新说下单词, 我记得之前看了很多讲如何记单词的资料.有一个资料是通过字母的象形来全是单词的意思.
其中= l ,本身是表示线条, 所以会有很多条状,杆状的名词通过 l 开头.
比如: long ,ladder, line.
同时文字都是基于线条的,所以很多和语言相关的单词也是 l 开头的.
比如 language,linguist, 包括今天所说的 lexicography.
还有再强行发散一下就是, 文字发明出来最初是用来记录法律. 所以很多法律相关的单词也是 l 开头的.
law,legal.

虽然这些说法,大部分情况下会觉得牵强.但是我们的目的并不是语言学的研究.
我们的目的还是要记住单词. 只要能记住单词的方法用用也无妨,比如那些搞笑谐音法的,
ambulance, lynch





happy redis!
